# 旅馆预定系统-JavaHotel

### 1、要求

> 要求实现命令行客户端和服务器端的通信
>
> 旅馆信息是管理员通过命令设定
>
> 用户只要求实现每人独占一个房间的预定，所以对于房间类型等信息暂时不考虑，每个房间给一个房间号即可
>
> ps: 但将来肯定要增加处理房间所属房间类型（比如单人标间、双人单床、双人双床、三人标间，只考虑这四种）及可容纳人数。（提示：同学们设计时应该提前准备好适应这种大概率会发生的变化。

### 2、用户管理

> 创建用户后要保存用户名和密码对
>
> 用户分为超级管理员、管理员和旅客三种
>
> ​	超级管理员可以创建和删除管理员
>
> ​	管理员可以执行除创建和删除管理员的所有功能
>
> ​	旅客不能进行用户管理部分功能和旅馆设定
>
> ​	超级管理员默认为root，密码root。

### 3、 旅馆信息

> 旅馆信息是管理员通过命令设定的，用户只要求实现每人独占一个房间的预定
>
> 旅馆预定包括预定起止日期和住宿人数
>
> 假定这些人都是同时到达，同时离开，如果不同时到达或离开，则必须拆分成多个预定。
>
> 预定中旅客不能搬移房间（比如住5天，不允许前3天在房间1，后2天在房间2）。
>
> 注意日期格式，年月日3个整数（例如2020 03 20）。

### 4、 旅馆预定

> 预定成功我们要保留的用户预定信息，包括预定用户、预定订单编号、订单信息（人数+起止日期）、分配信息（一个或多个房间号+起止日期），并把这些信息返回给用户
>
> 预定失败则返回FAIL。
>
> 程序内应该维护一张预定表，记录每个房间预定情况，不允许出现一个房间同一时间分配给多个预定的情况。

预定后分配房间的原则，是确保在多个房间能分配时有确定的分配顺序，从而结果是唯一的。目前要求实现的分配原则是按空余房间中房间编号从小到大分配房间。这个分配规则以后非常可能变化。

### 5、 命令格式

+ 服务器连接上以后客户端提示Server Connected, please enter command:

+ 命令包括命令名和若干个参数，命令名错误返回WRONG COMMAND，参数错误一律返回WRONG PARAMETER。

+ 创建旅客：任何人可自行创建。

  + 格式：create username password
  + 成功：返回OK
  + 失败：返回FAIL，比如用户重名等各种原因。

+ 创建管理员：必须先登录为超级管理员，格式和返回值同创建旅客。

+ 登录命令

  + 格式：login username password。
  + 验证成功后保存登录状态，当我们执行后续一系列命令时，保持此登录状态，返回OK。
  + 失败返回FAIL。

+ 注销命令格式：logout

  + 已经登录，退出登录状态，返回OK。
  + 未登录返回FAIL。

+ 超级管理员删除管理员

  + 命令格式:delete_admin username 
  + 删除成果返回OK，失败（不存在此用户）返回FAIL

+ 管理员添加旅馆房间信息

  + 命令格式：

    + 第一版：addroom roomnumber（房间号，这里暂不考虑其容量）

    + 输入房间号，比如：101（第一个1代表楼层，后两位代表房间编号用）

      房号不重复，返回OK，否则返回FAIL

+ 旅客预定房间

  + 格式：reserve_room people_number startdate enddate
  + 输入人数空格，输入入住日期空格，输入退房日期空格，比如： reserve_room 3 2020 3 5 2020 3 8
    + 如果房间足够，返回预定信息，如下：
      + 订单号xxx 预定旅客名xxx 预定人数 x 预定入住日期 x x x(年月日) 预定退房日期 x x x 预定房间号 xxx xxx … xxx （每个xxx表示一个被预定房间的房间号）
      + 如果房间不够或输入错误，预定失败，不产生订单数据，返回FAIL
      + 每个成功预定，或者说订单都有编号，从1开始，然后每个预定自动加1。失败的预定不生成订单。 

+ 管理员查看所有的预定信息：

  + 命令格式：show_reservations

    + 没有预定信息，返回，none

    + 可能有多个有预定信息 可能有多个房间，返回：

      （订单号）xxx （预定用户名） xxx （房间号） xxx xxx … xxx  （预定入住日期） 3个整数 （预定退房日期） 3个整数

    + 如：0001 Zhangsan 101 102 103 2020 3 4 2020 3 8

      0002 Lisi 104 2020 3 5 2020 3 7

+ 旅客查看自己的预定信息：

  + 命令格式：show_reservation

    + 没有预定信息，返回，none

    + 有一个预定信息 可能有多个房间，返回：

      （订单号）xxx（房间号） xxx xxx … xxx  （预定入住日期） 3个整数 （预定退房日期） 3个整数

    + 比如：0003 Wangwu 201 202 2020 3 3 2020 3 5

      有多个预定，返回多行，每行一个预定的信息。

      需要区分11和12这两种情况，前者显示所有订单，后者是仅仅显示自己的订单。